!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VueEventBus=t()}(this,function(){"use strict";var l=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return{name:(e=e.split("."))[0],namespaceList:e.slice(1).sort()}}function u(e){return RegExp("(^|\\.)"+e.join("\\.(?:.*\\.|)")+"(\\.|$)")}function v(e){"[object Array]"!=Object.prototype.toString.call(e)&&(e=[e]);var t=!0,n=!1,r=void 0;try{for(var i,o=e.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=c(i.value,2);e[a[0]]=s(a[1])}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e}function f(e,t){return e.has(t)?e.get(t):null}var h=function(){function e(){i(this,e),o(this,"entries",new Map)}return n(e,[{key:"on",value:function(e,t,n){var r=2<arguments.length&&void 0!==n&&n;e=v(e);var i,o,a,l=!0,c=!1,s=void 0;try{for(var u,f=e[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var h=u.value;(a=void 0,a=null,(i=this.entries).has(o=h.name)?a=i.get(o):(a=new y(o),i.set(o,a)),a).addCallback(h.namespaceList,t,r)}}catch(e){c=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw s}}return this}},{key:"once",value:function(e,t){this.on(e,t,!0)}},{key:"off",value:function(e,t){var n,r;if(1===arguments.length)n=0<arguments.length?e:void 0;else{if(2!=arguments.length)return this.entries.clear();n=0<arguments.length?e:void 0,r=1<arguments.length?t:void 0}n=v(n);var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=f(this.entries,s.name);u&&u.removeCallback(s.namespaceList,r)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return this}},{key:"trigger",value:function(e){e=s(e);var t=f(this.entries,e.name);if(t){for(var n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.fire.apply(t,[e.namespaceList].concat(r))}return this}}]),e}(),y=function(){function t(e){i(this,t),o(this,"_listeners",void 0),o(this,"_name",void 0),this._name=e}return n(t,[{key:"addCallback",value:function(e,t,n){var r=2<arguments.length&&void 0!==n&&n;this.listeners.push(new a(t,e.join("."),r))}},{key:"removeCallback",value:function(e,t){for(var n=e.length&&u(e),r=this.listeners.length-1;0<=r;r--)n&&!n.test(this.listeners[r].namespaces)||t&&this.listeners[r].callback!==t||this.listeners.splice(r,1)}},{key:"fire",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=[],o=e.length&&u(e);if(this.listeners.forEach(function(e,t){o&&!o.test(e.namespaces)||(e.callback.apply(e,n),e.once&&i.push(t))}),i.length)for(var a=0,l=0,c=i;l<c.length;l++){this.listeners.splice(c[l]-a,1),a+=1}}},{key:"listeners",get:function(){return void 0===this._listeners&&(this._listeners=[]),this._listeners}},{key:"name",get:function(){return this._name}}]),t}(),a=function(){function r(e,t,n){i(this,r),o(this,"_callback",void 0),o(this,"_once",void 0),o(this,"_namespaces",void 0),this._callback=e,this._once=n,this._namespaces=t}return n(r,[{key:"callback",get:function(){return this._callback}},{key:"once",get:function(){return this._once}},{key:"namespaces",get:function(){return this._namespaces}}]),r}(),p=function(e){return"[object Array]"==Object.prototype.toString.call(e)};return{install:function(e,t){l(1<arguments.length&&void 0!==t?t:{});var c=new h;function n(e,t){var o=".ns"+"".concat(Math.random()).replace(/\./g,"");e.$on("hook:beforeDestroy",function(){n.$off()});for(var n={$emit:function(){return c.trigger.apply(c,arguments),this},noConflict:function(){return t.call(this)},namespace:o,core:c},r=function(){var i=l[a];n[i[0]]=function(e,t){var n,r;return c[i[1]]((n=o,p(r=e)||(r=[r]),r.map(function(e){return e+n})),t),this}.bind(n)},a=0,l=[["$on","on"],["$off","off"],["$once","once"]];a<l.length;a++)r();return n}function r(){return o&&Object.defineProperty(e.prototype,i,o),this}var i="$eventBus",o=Object.getOwnPropertyDescriptor(e.prototype,i),a=Symbol();Object.defineProperty(e.prototype,i,{configurable:!0,enumerable:!1,get:function(){return this[a]||(this[a]=n(this,r)),this[a]}})}}});
